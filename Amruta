
DECLARE checkAgentSOReturn VARCHAR(255);

-- Find the starting position using string manipulation (adjust based on actual response)
DECLARE startIndex INTEGER;
SET startIndex = POSITION('<checkAgentsSOReturn>') IN inputroot.soap + LENGTH('<checkAgentsSOReturn>');

-- Find the ending position based on expected delimiter (adjust based on actual response)
DECLARE endIndex INTEGER;
SET endIndex = POSITION('</checkAgentsSOResponse>', SUBSTRING(inputroot.soap, startIndex)) - 1;

-- Ensure valid positions and extract the value
IF startIndex > 0 AND endIndex > startIndex THEN
  SET checkAgentSOReturn = SUBSTRING(inputroot.soap, startIndex, endIndex - startIndex + 1);
ELSE
  SET checkAgentSOReturn = NULL;  -- Handle the case where markers are not found
END IF;

-- Output the extracted value
OUTPUT('$checkAgentSOReturn = ' || checkAgentSOReturn);






DECLARE checkAgentSOReturn VARCHAR(255);

-- Set the variable with the value from the SOAP response
SET checkAgentSOReturn = (
    SELECT VALUE OF xp:extract('/SOAP Domain Msg/Body/checkAgentsSOResponse/checkAgentsSOReturn')
    FROM XMLNSC(inputroot.soap) AS xp('http://sbiccwebservice.servion.com')
);

-- Output the extracted value
OUTPUT('$checkAgentSOReturn = ' || checkAgentSOReturn);





-- Declare a variable to store the extracted value
DECLARE checkAgentSOReturn VARCHAR(255);

-- Set the variable with the value from the SOAP response
SET checkAgentSOReturn = (
    SELECT value(*)
    FROM XMLQUERY('//*[local-name()="checkAgentsSOReturn"]'
                  PASSING XMLNSC(inputroot.soap) AS doc
                  RETURNING CONTENT
    );

-- Output the extracted value
OUTPUT('$checkAgentSOReturn = ' || checkAgentSOReturn);



-- Declare a variable to store the extracted value
DECLARE checkAgentSOReturn VARCHAR(255);

-- Set the variable with the value from the SOAP response
SET checkAgentSOReturn = (
    SELECT VALUE OF xp:extract('/SOAP Domain Msg/Body/checkAgentsSOResponse/checkAgentsSOReturn')
    FROM XMLNSC(inputroot.soap) AS xp('http://sbiccwebservice.servion.com')
);

-- Output the extracted value
OUTPUT('$checkAgentSOReturn = ' || checkAgentSOReturn);
